# v1.2.0 남은 작업 및 향후 계획

**생성일**: 2025-11-25
**마지막 세션 커밋**: `87a6822` (Advanced HA Guide)
**현재 브랜치**: master (8 commits ahead of origin)

## 현재 진행 상황

### Must Have (4/4 - 100% 완료) ✅
- [x] Mimir chart - `8580750`
- [x] GitOps guide - `0af391c`
- [x] Grafana dashboards - `43ca476`
- [x] Enhanced chart READMEs - `ea434f9`

### Should Have (3/4 - 75% 완료)
- [x] Pre-configured alerting rules - `0455706`
- [x] Advanced HA guide - `87a6822`
- [ ] **OpenTelemetry Collector chart** ← 다음 우선순위
- [ ] Vault integration examples

### Phase 완료 현황
- **Phase 1**: Charts - 1/3 (Mimir 완료, OTel 미완료)
- **Phase 2**: Dashboards & Alerts - 3/3 ✅
- **Phase 3**: GitOps & Documentation - 3/4 (Security Hardening 미완료)
- **Phase 4**: Testing & Release - 미착수

---

## 남은 작업 목록

### 1. OpenTelemetry Collector Chart (High Priority)

**상태**: 미착수
**복잡도**: Complex
**예상 파일**:
- `charts/opentelemetry-collector/Chart.yaml`
- `charts/opentelemetry-collector/values.yaml`
- `charts/opentelemetry-collector/templates/`
- `charts/opentelemetry-collector/README.md`

**구현 요구사항**:
```yaml
# 핵심 기능
- OTLP receiver (gRPC, HTTP)
- 다중 exporter 지원:
  - Prometheus (metrics)
  - Loki (logs)
  - Tempo (traces)
  - Jaeger (traces)
- Pipeline 설정
- 리소스 프로세서
- ServiceMonitor 지원

# 참고 차트
- Official: https://github.com/open-telemetry/opentelemetry-helm-charts
- AppVersion: 0.96.0+
```

**구현 순서**:
1. Chart.yaml, values.yaml 기본 구조 생성
2. ConfigMap (collector config)
3. Deployment/DaemonSet
4. Service (OTLP, metrics)
5. ServiceMonitor
6. README.md
7. charts-metadata.yaml 업데이트

---

### 2. Security Hardening Guide (Medium Priority)

**상태**: 미착수
**복잡도**: Medium (문서 작업)
**파일**: `docs/SECURITY_HARDENING_GUIDE.md`

**포함 내용**:
```markdown
- Pod Security Standards (Restricted, Baseline, Privileged)
- Network Policy 패턴 및 예제
- RBAC 최소 권한 원칙
- Secret 관리 (rotation, encryption at rest)
- Container security (non-root, read-only fs, capabilities)
- Ingress TLS 설정
- Image security (signed images, scanning)
- Audit logging
```

---

### 3. Vault Integration Examples (Medium Priority)

**상태**: 미착수
**복잡도**: Medium
**파일**: `docs/VAULT_INTEGRATION_GUIDE.md` 또는 `examples/vault/`

**포함 내용**:
```yaml
# Vault Agent Injector
- Sidecar injection 설정
- Vault annotation 예제

# External Secrets Operator
- ClusterSecretStore 설정
- ExternalSecret CRD 예제

# Secrets Store CSI Driver
- SecretProviderClass 예제
- Volume mount 패턴

# 각 차트별 통합 예제
- Keycloak + Vault
- PostgreSQL + Vault
- Grafana + Vault
```

---

### 4. Immich v2 Migration Testing (Medium Priority)

**상태**: 미착수
**복잡도**: Medium
**브랜치**: `feature/immich-v2` (생성 필요)

**작업 내용**:
```bash
# 1. Feature branch 생성
git checkout -b feature/immich-v2

# 2. Chart 업데이트
# - appVersion: 1.122.3 → 2.3.1
# - Breaking changes 반영

# 3. 테스트
# - helm template 검증
# - 로컬 클러스터에서 배포 테스트

# 4. 문서화
# - Migration guide 작성
# - Breaking changes 목록
```

**Breaking Changes (예상)**:
- API endpoint 변경
- 환경 변수 이름 변경
- Database schema 변경
- Machine learning 모델 경로 변경

---

### 5. 기타 Major Version Migrations (Low Priority)

**참조**: `docs/ROADMAP_v1.2.0.md` - "Planned: Major Version Migrations"

| Chart | Current | Target | Notes |
|-------|---------|--------|-------|
| Airflow | 2.8.1 | 3.1.3 | 새로운 executor, DAG 포맷 |
| pgAdmin | 8.13 | 9.10 | UI 변경 |
| MLflow | 2.9.2 | 3.6.0 | Python 3.10+ 필요 |

---

## 추가 개선 작업

### Phase 4: Testing & Release

1. **Comprehensive Testing**
   - 모든 차트 `helm lint` 검증
   - `helm template` 출력 검증
   - ct (chart-testing) 도구 설정

2. **CHANGELOG.md 업데이트**
   - v1.2.0 릴리스 노트 작성
   - 모든 변경사항 문서화

3. **Release Notes**
   - GitHub Release 작성
   - Migration guide (1.1.0 → 1.2.0)

---

### 추가 권장 작업

#### Documentation
- [ ] OBSERVABILITY_STACK_GUIDE.md - Prometheus/Loki/Tempo/Mimir 통합 가이드
- [ ] MULTI_TENANCY_GUIDE.md - 멀티테넌시 설정 가이드
- [ ] UPGRADE_GUIDE.md - 차트 버전 업그레이드 가이드

#### Charts
- [ ] Consul chart (Service mesh, KV store)
- [ ] Vector chart (Promtail 대안, log/metrics 수집)
- [ ] Thanos chart (Prometheus HA 대안)

#### Operational
- [ ] Makefile 명령어 추가 (새 차트용)
- [ ] CI/CD 파이프라인 개선
- [ ] Helm unittest 도입

#### Dashboards & Alerts
- [ ] 차트별 개별 대시보드 추가
- [ ] SLO/SLI 대시보드
- [ ] 비용 모니터링 대시보드

---

## 작업 재개 방법

```bash
# 1. 현재 상태 확인
git status
git log --oneline -10

# 2. 로드맵 확인
cat docs/ROADMAP_v1.2.0.md

# 3. 이 문서 확인
cat tasks/plan/v1.2.0-remaining-tasks.md

# 4. Claude Code에서 작업 재개
/ce:continue
# 또는 특정 작업 지정
# "OpenTelemetry Collector chart를 구현해줘"
```

---

## 참고 링크

- [ROADMAP_v1.2.0.md](../../docs/ROADMAP_v1.2.0.md)
- [GitOps Guide](../../docs/GITOPS_GUIDE.md)
- [Advanced HA Guide](../../docs/ADVANCED_HA_GUIDE.md)
- [Dashboard Provisioning Guide](../../docs/DASHBOARD_PROVISIONING_GUIDE.md)
- [Alerting Rules](../../alerting-rules/)
- [Dashboards](../../dashboards/)
