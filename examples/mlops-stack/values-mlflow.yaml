# MLflow values for MLOps Stack
# Experiment tracking and model registry

replicaCount: 1

# PostgreSQL backend store (for experiment metadata)
postgresql:
  external:
    enabled: true
    host: "postgresql"
    port: 5432
    database: "mlflow"
    username: "mlflow"
    password: "mlflow-password-change-me"

# MinIO artifact store (for models and artifacts)
minio:
  external:
    enabled: true
    endpoint: "http://minio:9000"
    accessKey: "minio-admin"
    secretKey: "minio-secret-key-change-me"
    bucket: "mlflow"
    ignoreTLS: "true"

# MLflow configuration
mlflow:
  # Serve artifacts through MLflow server
  serveArtifacts: true

# Disable local persistence (using external services)
persistence:
  sqlite:
    enabled: false
  artifacts:
    enabled: false

# Resources
resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 100m
    memory: 256Mi

# Service
service:
  type: ClusterIP
  port: 5000

# Ingress (optional - uncomment for external access)
ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  hosts:
    - host: mlflow.local
      paths:
        - path: /
          pathType: Prefix
  tls: []
    # - secretName: mlflow-tls
    #   hosts:
    #     - mlflow.local
