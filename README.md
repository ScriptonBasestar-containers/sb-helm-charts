# Helm Chart - ScriptonBasestar

## 프로젝트 목표

개인 서버 및 간단한 서버 운영을 위한 차트

helm의 설정값만 가지고 소프트웨어를 설치할 수 있게 만든다는 컨셉이 틀렸다.

설치가 쉬운건 잠깐이고 유지보수에 오류가 없어야 하는데 헬름차트의 복잡한 values 지속적으로 오류를 발생시킨다.
편하게 만들려고 하면 할 수록 점점 더 복잡해지고 소프트웨어에서 대규모의 변경이 발생했을 때 따라가지도 못한다.
어차피 장기적으로 서버를 운영하려면 소프트웨어를 이해해야한다. 쉬운 설치는 도움이 안 된다.

오래된 오픈소스는 대부분 설정파일을 기반으로 개발되어 있고 환경변수를 지원하더라도 싱글서버에서는 설정파일을 관리하는편이 더 오류가 적다.
만능헬름차트는 홈서버 나스용으로도 거의 못 쓰고 결국 커스텀을 해야한다.
그럴바에는... 환경변수를 config나 values에 포함시키는 편이 낫다.

helm의 가장 잘못된 설계는 config파일을 values에 대입하는 기능을 안 만든 부분이다.
하지만 이게 표준이 돼 버렸으니... 그 부분을 감안하고 쓰려고 한다.

## 다른차트와 차별점
- 설정파일 활용, 환경변수 사용은 지양
    - 대부분의 오래된 오픈소스는 설정파일 기반으로 개발되어 있다.
    - 설정파일 위주 소프트웨어를 환경변수 기반인 도커로 변환하면서 문제가 발생한다.
- 서브차트 최대한 배제
    - 필수적으로 함께 사용되는 것들만 함께 설치
    - 일반적으로 별도 설치하는 db 등은 분리
    - 디비는 각 사이트마다 자신들이 원하는 옵션이 있어서 차트로 포함 해 봐야 실 배포에서 한번도 쓴 적이 없다.

## Charts
### Custom
- [ ] nextcloud: linux container
- [ ] wordpress
- [v] rsshub

### Official
- nextcloud
    - bitnami, official: X 어느날 재부팅 후에 무한재부팅 컨테이너가 보임
        - 도커이미지는 환경변수를 쓰는데 설정파일 볼륨을 잃거나 하면 무한재부팅 .어드민 생성등 문제 발생
        - 헬름은 설정을 편하게 만들려다가 더 복잡해진 전형적인 케이스
    - linuxcontainer: ??? 설정위주컨테이너
        - 애매하게 스크립트가 들어있어서 초기 설치시 설정파일을 복사 부여넣기 했던 기억이
    - https://github.com/nextcloud/all-in-one: 새로운 표준인듯.
        - 안써봤는데 이게 잘 되면 별도 컨테이너 필요 없을듯
- wordpress
    - 몇가지 비교 필요. 헬름 및 오퍼레이터가 너무 많아서 좋은걸 고르기 힘들다.
