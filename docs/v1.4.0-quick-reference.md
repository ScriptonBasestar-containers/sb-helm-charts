# v1.4.0 Quick Reference Card

**Release**: v1.4.0 - Operational Excellence
**Date**: 2025-12-09
**Status**: âœ… Ready for Release

---

## ðŸ“Š At a Glance

| Metric | Value |
|--------|-------|
| **Enhanced Charts** | 28/39 (72%) |
| **New in v1.4.0** | 20 charts |
| **Documentation** | ~88,000 lines added |
| **Guides** | 7 comprehensive |
| **Makefile Targets** | 500+ new |
| **Testing** | 100% (39/39) |
| **Breaking Changes** | None |
| **Compatibility** | 100% backward |

---

## ðŸš€ Quick Start

### Upgrade from v1.3.0

```bash
# Update repository
helm repo update sb-charts

# Upgrade individual chart
helm upgrade {chart} sb-charts/{chart} --version 0.4.0 --reuse-values

# Optional: Enable RBAC
helm upgrade {chart} sb-charts/{chart} --set rbac.create=true --reuse-values
```

### Batch Upgrade (Phase 1-3 Charts)

```bash
# Phase 1: Critical Infrastructure
for chart in prometheus loki tempo postgresql mysql redis; do
  helm upgrade $chart sb-charts/$chart --version 0.4.0 --reuse-values
done

# Phase 2: Applications
for chart in grafana nextcloud vaultwarden wordpress paperless-ngx immich jellyfin uptime-kuma; do
  helm upgrade $chart sb-charts/$chart --version 0.4.0 --reuse-values
done

# Phase 3: Supporting Infrastructure
for chart in minio mongodb rabbitmq promtail alertmanager memcached; do
  helm upgrade $chart sb-charts/$chart --version 0.4.0 --reuse-values
done
```

---

## ðŸ“¦ Enhanced Charts (20 New)

### Phase 1: Critical Infrastructure (6)
- Prometheus, Loki, Tempo
- PostgreSQL, MySQL, Redis

### Phase 2: Applications (8)
- Grafana, Nextcloud, Vaultwarden, WordPress
- Paperless-ngx, Immich, Jellyfin, Uptime Kuma

### Phase 3: Supporting Infrastructure (6)
- MinIO, MongoDB, RabbitMQ
- Promtail, Alertmanager, Memcached

---

## ðŸ“š Comprehensive Guides (7)

1. **Disaster Recovery** (1,299 lines) - 4-tier architecture, 28 charts
2. **Performance Optimization** (2,335 lines) - Sizing, scaling, tuning
3. **Cost Optimization** (1,330 lines) - FinOps, tracking, spot instances
4. **Service Mesh** (1,497 lines) - Istio, Linkerd integration
5. **Testing Framework** (1,340 lines) - BATS, CI/CD, 100% coverage
6. **Backup Orchestration** (1,440 lines) - Master script, verification
7. **Performance Baseline** (1,175 lines) - 28 charts, regression detection

---

## ðŸ”‘ Key Features

### RBAC (All 28 Charts)
```yaml
rbac:
  create: true  # Enable RBAC
  annotations: {}  # Optional
```

### Backup & Recovery
```bash
# Backup
make -f make/ops/{chart}.mk {chart}-backup-all

# Restore
make -f make/ops/{chart}.mk {chart}-restore-all \
  BACKUP_DIR=/path/to/backup
```

### Upgrade with Validation
```bash
# 1. Pre-upgrade backup
make -f make/ops/{chart}.mk {chart}-backup-all

# 2. Pre-upgrade check
make -f make/ops/{chart}.mk {chart}-pre-upgrade-check

# 3. Upgrade
helm upgrade {chart} sb-charts/{chart} --version 0.4.0

# 4. Post-upgrade validation
make -f make/ops/{chart}.mk {chart}-post-upgrade-check
```

---

## ðŸ“‹ RTO/RPO Targets

| Tier | Charts | RTO | RPO |
|------|--------|-----|-----|
| Tier 1 | 6 | < 1-2 hours | 15 min - 24h |
| Tier 2 | 8 | < 1-2 hours | 24h |
| Tier 3 | 8 | < 2 hours | 24h |
| Tier 4 | 6 | < 30 minutes | 0 (stateless) |
| **Total** | **28** | **< 2 hours** | **0-24h** |

---

## ðŸ› ï¸ Common Makefile Targets

```bash
# Backup Operations
{chart}-backup-all          # Complete backup
{chart}-full-backup         # Full backup with verification
{chart}-restore-all         # Full restoration

# Health Checks
{chart}-health              # Overall health status
{chart}-check-db            # Database connectivity
{chart}-check-storage       # Storage accessibility

# Upgrade Operations
{chart}-pre-upgrade-check   # Pre-upgrade validation
{chart}-post-upgrade-check  # Post-upgrade validation
{chart}-upgrade-rollback    # Automated rollback

# Basic Operations
{chart}-logs                # View logs
{chart}-shell               # Open shell
{chart}-port-forward        # Port forwarding
{chart}-restart             # Restart deployment
```

---

## ðŸ§ª Testing

### Validation Scripts

```bash
# Documentation validation
./scripts/validate-v1.4.0-docs.sh

# RBAC template validation
./scripts/validate-rbac-templates.sh

# Makefile target validation
./scripts/validate-makefile-targets.sh
```

### Integration Tests

```bash
# Run integration tests (BATS framework)
cd tests/integration
bats test-{chart}.bats
```

---

## ðŸ“– Documentation Quick Links

### Release Documentation
- [CHANGELOG.md](../CHANGELOG.md) - Complete changelog
- [RELEASE_NOTES_v1.4.0.md](RELEASE_NOTES_v1.4.0.md) - Release notes
- [v1.4.0-final-summary.md](v1.4.0-final-summary.md) - Executive summary

### Operational Guides
- [disaster-recovery-guide.md](disaster-recovery-guide.md) - DR procedures
- [performance-optimization-guide.md](performance-optimization-guide.md) - Performance tuning
- [cost-optimization-guide.md](cost-optimization-guide.md) - Cost management
- [service-mesh-integration-guide.md](service-mesh-integration-guide.md) - Service mesh
- [automated-testing-framework-guide.md](automated-testing-framework-guide.md) - Testing
- [backup-orchestration-guide.md](backup-orchestration-guide.md) - Backup automation
- [performance-benchmarking-baseline.md](performance-benchmarking-baseline.md) - Baselines

### Chart-Specific Guides
- Pattern: `docs/{chart}-backup-guide.md` (backup procedures)
- Pattern: `docs/{chart}-upgrade-guide.md` (upgrade strategies)

### Testing & Release
- [v1.4.0-release-testing-plan.md](v1.4.0-release-testing-plan.md) - Testing plan
- [RELEASE_CHECKLIST_v1.4.0.md](RELEASE_CHECKLIST_v1.4.0.md) - Release checklist

---

## âš ï¸ Important Notes

### Breaking Changes
**None** - This release is 100% backward compatible.

### Known Limitations
1. **RBAC**: Some charts require ClusterRole (Promtail, exporters)
2. **Backup**: Manual execution required (Makefile-driven)
3. **PITR**: Only PostgreSQL and MySQL (requires WAL/binlog)
4. **Database HA**: Use Operators for production (see docs/migrations/)

### Migration from v1.3.0
- All new features are opt-in
- RBAC configurable via `rbac.create` (default: true)
- Backup targets require manual execution
- Review backup/upgrade guides for deployed charts

---

## ðŸ†˜ Troubleshooting

### Issue: Upgrade Fails

```bash
# Check current release status
helm status {chart} -n {namespace}

# Review upgrade history
helm history {chart} -n {namespace}

# Rollback to previous version
helm rollback {chart} 0
```

### Issue: Backup Fails

```bash
# Check backup directory permissions
ls -la /backup/path

# Verify chart is running
kubectl get pods -n {namespace}

# Check Makefile target exists
make -f make/ops/{chart}.mk help | grep backup
```

### Issue: RBAC Permissions

```bash
# Verify RBAC is enabled
kubectl get role,rolebinding -n {namespace}

# Check ServiceAccount
kubectl get serviceaccount -n {namespace}

# Describe role permissions
kubectl describe role {chart} -n {namespace}
```

---

## ðŸ“ž Support

**Repository**: https://github.com/scriptonbasestar-container/sb-helm-charts
**Issues**: https://github.com/scriptonbasestar-container/sb-helm-charts/issues
**Discussions**: https://github.com/scriptonbasestar-container/sb-helm-charts/discussions
**Helm Repo**: https://scriptonbasestar-container.github.io/sb-helm-charts

---

## ðŸŽ¯ Success Criteria (Achieved)

### Must Have âœ…
- [x] 10+ charts enhanced (achieved: 20)
- [x] Disaster Recovery Guide
- [x] Performance Optimization Guide
- [x] Automated testing framework
- [x] Cross-chart backup orchestration

### Should Have âœ…
- [x] 20 planned charts enhanced
- [x] Service Mesh Integration Guide
- [x] Cost Optimization Guide
- [x] DR automation
- [x] Performance benchmarking baseline

**Overall**: 10/10 (100%) âœ…

---

## ðŸ“ˆ Performance Baselines (Examples)

| Chart | Metric | Baseline |
|-------|--------|----------|
| PostgreSQL | TPS | 847 |
| PostgreSQL | Latency (avg) | 11.8ms |
| Redis | SET ops/sec | 52,000 |
| Redis | GET ops/sec | 71,000 |
| Prometheus | Samples/sec | 50,000 |
| Kafka | Producer msg/sec | 100,000 |
| Kafka | Consumer msg/sec | 150,000 |

See [performance-benchmarking-baseline.md](performance-benchmarking-baseline.md) for complete baselines.

---

## ðŸ”„ Upgrade Strategies

### 1. Rolling Upgrade (Recommended)
- **Downtime**: None
- **Complexity**: Low
- **Best for**: Production with HA

### 2. Blue-Green Deployment
- **Downtime**: 10-30 minutes (cutover)
- **Complexity**: Medium
- **Best for**: Risk-averse, instant rollback needed

### 3. Maintenance Window
- **Downtime**: 30-60 minutes
- **Complexity**: Low
- **Best for**: Major version upgrades

### 4. In-Place Upgrade
- **Downtime**: 5-15 minutes
- **Complexity**: Very Low
- **Best for**: Dev/test environments

See individual upgrade guides for chart-specific strategies.

---

## ðŸ’¡ Pro Tips

1. **Always backup before upgrade** - Use `{chart}-backup-all` target
2. **Enable RBAC for security** - Set `rbac.create=true`
3. **Use pre/post upgrade checks** - Catch issues early
4. **Monitor RTO/RPO metrics** - Track recovery capabilities
5. **Automate backups** - Use backup-orchestrator.sh with CronJob
6. **Validate after upgrade** - Run post-upgrade-check
7. **Keep documentation handy** - Bookmark operational guides
8. **Test in dev first** - Validate upgrades in non-prod
9. **Use values-example.yaml** - Start with production templates
10. **Join discussions** - Share feedback and learn from community

---

**v1.4.0 Quick Reference**
**Last Updated**: 2025-12-09
**Print**: 2 pages (double-sided)
