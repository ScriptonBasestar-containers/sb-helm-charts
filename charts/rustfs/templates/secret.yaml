{{- if not .Values.rustfs.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "rustfs.fullname" . }}-secret
  labels:
    {{- include "rustfs.labels" . | nindent 4 }}
type: Opaque
data:
  {{- if not .Values.rustfs.rootPassword }}
  {{- fail "rustfs.rootPassword is required when not using existingSecret" }}
  {{- end }}
  {{ .Values.rustfs.rootUserKey }}: {{ .Values.rustfs.rootUser | b64enc | quote }}
  {{ .Values.rustfs.rootPasswordKey }}: {{ .Values.rustfs.rootPassword | b64enc | quote }}
{{- end }}
