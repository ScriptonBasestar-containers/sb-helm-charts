# Default values for wordpress.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# WordPress configuration
wordpress:
  # Site configuration
  title: "My WordPress Site"
  siteUrl: "https://wordpress.example.com"
  homeUrl: "https://wordpress.example.com"

  # Admin user configuration
  admin:
    username: "admin"
    password: ""  # Required: Set a strong password
    email: "admin@example.com"

  # WordPress debug mode
  debug: "false"

  # WordPress table prefix
  tablePrefix: "wp_"

  # WordPress salts and keys (auto-generated if empty)
  # Generate at: https://api.wordpress.org/secret-key/1.1/salt/
  salts:
    authKey: ""
    secureAuthKey: ""
    loggedInKey: ""
    nonceKey: ""
    authSalt: ""
    secureAuthSalt: ""
    loggedInSalt: ""
    nonceSalt: ""

  # WordPress plugins to install/activate
  plugins:
    install: []
    # Example: ["woocommerce", "contact-form-7"]
    activate: []

  # WordPress themes
  themes:
    install: []
    # Example: ["twentytwentyfour"]
    activate: ""
    # Example: twentytwentyfour

# External MySQL database configuration
mysql:
  enabled: false  # We use external MySQL
  external:
    enabled: true
    host: ""  # e.g., mysql-service.default.svc.cluster.local
    port: 3306
    database: "wordpress"
    username: "wordpress"
    password: ""  # Required: Set database password
    # Use existing secret (optional)
    existingSecret:
      enabled: false
      secretName: ""
      usernameKey: "username"
      passwordKey: "password"
      databaseKey: "database"

# Persistent storage configuration
persistence:
  enabled: true
  # WordPress content directory
  content:
    enabled: true
    storageClass: ""  # Use default storage class if empty
    accessMode: ReadWriteOnce
    size: 10Gi
    existingClaim: ""

# Replica count
replicaCount: 1

# Container image configuration
image:
  repository: wordpress
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion
  tag: "6.4.3-apache"  # WordPress with Apache

# Image pull secrets for private registries
imagePullSecrets: []

# Override chart name
nameOverride: ""
fullnameOverride: ""

# Service account configuration
serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

# Pod annotations
podAnnotations: {}

# Pod labels
podLabels: {}

# Pod security context
podSecurityContext:
  fsGroup: 33  # www-data group for WordPress

# Container security context
securityContext:
  runAsUser: 33  # www-data user for WordPress
  runAsGroup: 33
  runAsNonRoot: true
  readOnlyRootFilesystem: false

# Service configuration
service:
  type: ClusterIP
  port: 80
  targetPort: 80

# Ingress configuration
ingress:
  enabled: false
  className: "nginx"
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: "100m"
    nginx.ingress.kubernetes.io/proxy-buffering: "off"
  hosts:
    - host: wordpress.example.local
      paths:
        - path: /
          pathType: Prefix
  tls: []
  # Example TLS configuration:
  # tls:
  #   - secretName: wordpress-tls
  #     hosts:
  #       - wordpress.example.com

# Resource limits and requests
resources:
  limits:
    cpu: 1000m
    memory: 1Gi
  requests:
    cpu: 250m
    memory: 256Mi

# Liveness probe configuration
livenessProbe:
  httpGet:
    path: /wp-admin/install.php
    port: http
    httpHeaders:
      - name: Host
        value: "localhost"
  initialDelaySeconds: 120
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 6
  successThreshold: 1

# Readiness probe configuration
readinessProbe:
  httpGet:
    path: /wp-login.php
    port: http
    httpHeaders:
      - name: Host
        value: "localhost"
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3
  successThreshold: 1

# Startup probe (for slow initialization)
startupProbe:
  httpGet:
    path: /wp-login.php
    port: http
    httpHeaders:
      - name: Host
        value: "localhost"
  initialDelaySeconds: 30
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 30
  successThreshold: 1

# Autoscaling configuration
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

# Pod Disruption Budget
podDisruptionBudget:
  enabled: false
  minAvailable: 1
  # maxUnavailable: 1

# Network Policy
networkPolicy:
  enabled: false
  ingress:
    - from:
        - namespaceSelector:
            matchLabels:
              name: ingress-nginx
      ports:
        - protocol: TCP
          port: 80
  egress: []

# Monitoring configuration
monitoring:
  serviceMonitor:
    enabled: false
    path: /
    interval: 30s
    scrapeTimeout: 10s
    additionalLabels: {}
    relabelings: []
    targetLabels: []

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity rules
affinity: {}

# Additional environment variables
extraEnv: []
# Example:
# - name: WORDPRESS_CONFIG_EXTRA
#   value: |
#     define('WP_MEMORY_LIMIT', '256M');
#     define('WP_MAX_MEMORY_LIMIT', '512M');

# Additional volumes
extraVolumes: []
# Example:
# - name: custom-config
#   configMap:
#     name: wordpress-custom-config

# Additional volume mounts
extraVolumeMounts: []
# Example:
# - name: custom-config
#   mountPath: /etc/wordpress-custom
