# Default values for alertmanager
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: prom/alertmanager
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext:
  runAsUser: 65534
  runAsNonRoot: true
  fsGroup: 65534

securityContext:
  readOnlyRootFilesystem: true
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL

service:
  type: ClusterIP
  port: 9093
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "9093"
  # clusterIP: ""
  # loadBalancerIP: ""
  # loadBalancerSourceRanges: []
  # nodePort: 30093

# Alertmanager configuration
alertmanager:
  # Data retention period
  retention: "120h"

  # Extra command-line arguments
  extraArgs: []
  # - --log.level=debug
  # - --cluster.reconnect-timeout=5m

# Alertmanager configuration file
config:
  global:
    # The smarthost and SMTP sender used for mail notifications
    resolveTimeout: "5m"

    # SMTP configuration (optional)
    smtp: {}
    #   from: "alertmanager@example.com"
    #   smarthost: "smtp.example.com:587"
    #   authUsername: "alertmanager@example.com"
    #   authPassword: "password"
    #   requireTLS: true

    # Slack API URL (optional)
    slackApiUrl: ""

    # PagerDuty URL (optional)
    pagerdutyUrl: ""

    # Opsgenie API URL (optional)
    opsgenieApiUrl: ""

    # WeChat API URL (optional)
    wechatApiUrl: ""

    # VictorOps API URL (optional)
    victoropsApiUrl: ""

    # HTTP client configuration
    httpConfig: {}
    #   tls_config:
    #     insecure_skip_verify: false

  # List of notification template files
  templates: []
  # - "/etc/alertmanager/templates/*.tmpl"

  # The root route on which each incoming alert enters
  route:
    # The labels by which incoming alerts are grouped together
    groupBy: ['alertname', 'cluster', 'service']

    # When a new group of alerts is created by an incoming alert, wait at
    # least 'group_wait' to send the initial notification
    groupWait: 10s

    # When the first notification was sent, wait 'group_interval' to send a batch
    # of new alerts that started firing for that group
    groupInterval: 10s

    # If an alert has successfully been sent, wait 'repeat_interval' to
    # resend them
    repeatInterval: 12h

    # A default receiver
    receiver: default

    # Child routes (optional)
    routes: []
    # - match:
    #     severity: critical
    #   receiver: critical-alerts
    #   continue: true
    # - match:
    #     severity: warning
    #   receiver: warning-alerts

  # Inhibition rules allow to mute a set of alerts given that another alert is firing
  inhibitRules: []
  # - source_match:
  #     severity: 'critical'
  #   target_match:
  #     severity: 'warning'
  #   equal: ['alertname', 'cluster', 'service']

  # Receivers is a list of notification receivers
  receivers:
    - name: default
      # email_configs:
      # - to: "admin@example.com"
      # slack_configs:
      # - channel: "#alerts"
      #   text: "{{ range .Alerts }}{{ .Annotations.summary }}\n{{ end }}"
      # pagerduty_configs:
      # - service_key: "your-service-key"
      # webhook_configs:
      # - url: "http://example.com/webhook"

# ServiceMonitor for Prometheus Operator
serviceMonitor:
  enabled: false
  interval: 30s
  scrapeTimeout: 10s
  labels: {}
  #   prometheus: kube-prometheus
  metricRelabelings: []
  relabelings: []

# PodDisruptionBudget
podDisruptionBudget:
  enabled: false
  # minAvailable: 1
  # maxUnavailable: 1

# Persistence
persistence:
  enabled: false
  # storageClass: ""
  accessModes:
    - ReadWriteOnce
  size: 2Gi
  annotations: {}

resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 50m
    memory: 64Mi

livenessProbe:
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 1
  failureThreshold: 3

readinessProbe:
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 1
  failureThreshold: 3

nodeSelector: {}

tolerations: []

affinity: {}

priorityClassName: ""
