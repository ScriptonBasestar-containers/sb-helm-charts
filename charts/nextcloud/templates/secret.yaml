apiVersion: v1
kind: Secret
metadata:
  name: {{ include "nextcloud.fullname" . }}-secret
  labels:
    {{- include "nextcloud.labels" . | nindent 4 }}
type: Opaque
stringData:
  {{- if not .Values.postgresql.external.existingSecret.enabled }}
  # PostgreSQL credentials
  postgres-username: {{ .Values.postgresql.external.username | quote }}
  postgres-password: {{ .Values.postgresql.external.password | quote }}
  postgres-database: {{ .Values.postgresql.external.database | quote }}
  {{- end }}

  {{- if not .Values.redis.external.existingSecret.enabled }}
  # Redis credentials
  redis-password: {{ .Values.redis.external.password | quote }}
  {{- end }}

  # Nextcloud admin credentials
  nextcloud-admin-user: {{ .Values.nextcloud.adminUser | quote }}
  nextcloud-admin-password: {{ .Values.nextcloud.adminPassword | quote }}

  {{- if .Values.nextcloud.smtp.enabled }}
  # SMTP credentials
  smtp-username: {{ .Values.nextcloud.smtp.username | quote }}
  smtp-password: {{ .Values.nextcloud.smtp.password | quote }}
  {{- end }}
